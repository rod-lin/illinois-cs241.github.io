<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="apple-touch-icon" sizes="180x180" href="images/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="images/favicons/manifest.json">
  <link rel="mask-icon" href="images/favicons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <title>HW0</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" crossorigin="anonymous">
  <link async rel="stylesheet" href="/css/code-style.css?v=2018-09-08 16:51:38 +0000">
  <link rel="stylesheet" href="/css/main.css?v=2018-09-08 16:51:38 +0000">

</head>

<body>
<!-- Always shows a header, even in smaller screens. -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>

            <a id="tuxlink"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAJCAMAAAA4jZ0cAAAAM1BMVEX///8CAgQMDAwsLCw0NDSjbQCkbQC+vbzOkwDU1NTlrADqvADxtgD0vQD12wD+/vz+//yBSdYEAAAAAXRSTlMAQObYZgAAADFJREFUCB0FwQkCQDAQBLCsq6g1/v9aCVQBthUwX8BIgStZCpUvKXSSLs6eyd0Pdg5+JwkBVyC74QYAAAAASUVORK5CYII=" title="Tux" alt="Tux" style="margin-left: 1em; width: 24px; filter: drop-shadow(1px 1px 0 white) drop-shadow(1px -1px 0 white) drop-shadow(-1px 1px 0 white) drop-shadow(-1px -1px 0 white); margin-top: 1em;"/></a>

            <a class="navbar-brand navbar-link normal" href="/">CS 241: System Programming</a>
            <a class="navbar-brand navbar-link small" href="/">CS 241</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li>
            <a class="navbar-link" href="/mps.html">MPs</a>
            </li>
            <li>
            <a class="navbar-link" href="/labs.html">Labs</a>
            </li>
            <li>
            <a class="navbar-link" href="/help.html">Help!</a>
            </li>
            <li>
            <a class="navbar-link" href="/schedule.html">Schedule</a>
            </li>
            <li>
            <a class="navbar-link" href="/honors.html">Honors</a>
            </li>
            <li>
            <a class="navbar-link" href="/staff.html">The Crew</a>
            </li>
            <li>
            <a class="navbar-link" href="/search.html">Search</a>
            </li>
            <li>
            <a class="navbar-link" href="/wikibook/home.html">Wikibook</a>
            </li>
          </ul>
        </div>
        </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2 col-sm-1 col-xs-0"></div>
    <div class="col-md-8 col-sm-10 col-xs-12">
      <div class="wrapper">
        <div class="pad"><div class="card">
          <div class="title">
            <div class="speaker-wrapper">
              <button onclick="speak()" class="speaker" alt="Read Page"></button>
            </div>
            <h1>
              HW0
              
                <a class="github-link hidden-xs" href="https://github.com/angrave/SystemProgramming/wiki//HW0">Edit on Github</a>
              
            </h1>
          </div>
          <div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
            
          </div></div></div>
        </div></div>
      </div>
      <div class="toc-wrapper">
<h4>Content</h4>
<ul class="toc">
<li><a id="toc_so-you-want-to-master-system-programming-and-get-a-better-grade-than-b" href="#so-you-want-to-master-system-programming-and-get-a-better-grade-than-b" class="fancy-link">So you want to master System Programming? And get a better grade than B?</a></li>
<li><a id="toc_watch-the-videos-and-write-up-your-answers-to-the-following-questions" href="#watch-the-videos-and-write-up-your-answers-to-the-following-questions" class="fancy-link">Watch the videos and write up your answers to the following questions</a></li>
<li><a id="toc_chapter-1" href="#chapter-1" class="fancy-link">Chapter 1</a></li>
<li><a id="toc_chapter-2" href="#chapter-2" class="fancy-link">Chapter 2</a></li>
<li><a id="toc_chapter-3" href="#chapter-3" class="fancy-link">Chapter 3</a></li>
<li><a id="toc_chapter-4" href="#chapter-4" class="fancy-link">Chapter 4</a></li>
<li><a id="toc_chapter-5" href="#chapter-5" class="fancy-link">Chapter 5</a></li>
<li><a id="toc_c-development" href="#c-development" class="fancy-link">C Development</a></li>
<li><a id="toc_optional-just-for-fun" href="#optional-just-for-fun" class="fancy-link">Optional (Just for fun)</a></li>
</ul>
</div>
      <div id="content">
        
        <div class="wrapper">

</div>
        <div class="wrapper"><div class="pad"><div class="card">


<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<h1 id="welcome">Welcome!</h1>
<pre><code class="language-C"><a class="code-copy" rel="code-copy-0" onclick="onCopy(this);">Copy</a><span class="c1">// First, can you guess which lyrics have been transformed into this C-like system code?</span>
<span class="kt">char</span> <span class="n">q</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"Do you wanna build a C99 program?"</span><span class="p">;</span>
<span class="cp">#define or "go debugging with gdb?"
</span><span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">or</span><span class="p">)</span> <span class="o">!=</span> <span class="n">strlen</span><span class="p">(</span><span class="n">or</span><span class="p">);</span>
<span class="kt">char</span><span class="o">*</span> <span class="n">ptr</span> <span class="o">=</span> <span class="s">"lathe"</span><span class="p">;</span> <span class="kt">size_t</span> <span class="n">come</span> <span class="o">=</span> <span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span><span class="s">"%s door"</span><span class="p">,</span> <span class="n">ptr</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span>
<span class="kt">int</span> <span class="n">away</span> <span class="o">=</span> <span class="o">!</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="o">*</span> <span class="s">""</span><span class="p">;</span>

<span class="kt">int</span><span class="o">*</span> <span class="n">shared</span> <span class="o">=</span> <span class="n">mmap</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">),</span> <span class="n">PROT_READ</span> <span class="o">|</span> <span class="n">PROT_WRITE</span><span class="p">,</span> <span class="n">MAP_SHARED</span> <span class="o">|</span> <span class="n">MAP_ANONYMOUS</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">munmap</span><span class="p">(</span><span class="n">shared</span><span class="p">,</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">));</span>

<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">fork</span><span class="p">())</span> <span class="p">{</span> <span class="n">execlp</span><span class="p">(</span><span class="s">"man"</span><span class="p">,</span><span class="s">"man"</span><span class="p">,</span><span class="s">"-3"</span><span class="p">,</span><span class="s">"ftell"</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">);</span> <span class="n">perror</span><span class="p">(</span><span class="s">"failed"</span><span class="p">);</span> <span class="p">}</span>
<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">fork</span><span class="p">())</span> <span class="p">{</span> <span class="n">execlp</span><span class="p">(</span><span class="s">"make"</span><span class="p">,</span><span class="s">"make"</span><span class="p">,</span> <span class="s">"snowman"</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">);</span> <span class="n">execlp</span><span class="p">(</span><span class="s">"make"</span><span class="p">,</span><span class="s">"make"</span><span class="p">,</span> <span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">));</span> <span class="p">}</span>

<span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<textarea id="code-copy-0" class="code-copy-textarea" value='// First, can you guess which lyrics have been transformed into this C-like system code?
char q[] = "Do you wanna build a C99 program?";
#define or "go debugging with gdb?"
static unsigned int i = sizeof(or) != strlen(or);
char* ptr = "lathe"; size_t come = fprintf(stdout,"%s door", ptr+2);
int away = ! (int) * "";

int* shared = mmap(NULL, sizeof(int*), PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);
munmap(shared,sizeof(int*));

if(!fork()) { execlp("man","man","-3","ftell", (char*)0); perror("failed"); }
if(!fork()) { execlp("make","make", "snowman", (char*)0); execlp("make","make", (char*)0)); }

exit(0);
'></textarea></code></pre>
<div class="pad"><div class="card">
<div class="title"><h2 id="so-you-want-to-master-system-programming-and-get-a-better-grade-than-b" class="title-text">So you want to master System Programming? And get a better grade than B?<a class="anchor title-text" href="#so-you-want-to-master-system-programming-and-get-a-better-grade-than-b">#</a>
</h2></div>
<pre><code class="language-C"><a class="code-copy" rel="code-copy-1" onclick="onCopy(this);">Copy</a><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">**</span> <span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">"Great! We have plenty of useful resources for you, but it's up to you to"</span><span class="p">);</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">" be an active learner and learn how to solve problems and debug code."</span><span class="p">);</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">"Bring your near-completed answers the problems below"</span><span class="p">);</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">" to the first lab to show that you've been working on this."</span><span class="p">);</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"A few </span><span class="se">\"</span><span class="s">don't knows</span><span class="se">\"</span><span class="s"> or </span><span class="se">\"</span><span class="s">unsure</span><span class="se">\"</span><span class="s"> is fine for lab 1.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span> 
	<span class="n">puts</span><span class="p">(</span><span class="s">"Warning: you and your peers will work hard in this class."</span><span class="p">);</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">"This is not CS225; you will be pushed much harder to"</span><span class="p">);</span>
	<span class="n">puts</span><span class="p">(</span><span class="s">" work things out on your own."</span><span class="p">);</span>
	<span class="n">fprintf</span><span class="p">(</span><span class="n">stdout</span><span class="p">,</span><span class="s">"This homework is a stepping stone to all future assignments.</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="kt">char</span> <span class="n">p</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"So, you will want to clear up any confusions or misconceptions.</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
	<span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">);</span>
	<span class="kt">char</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
	<span class="n">sprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="s">"For grading purposes, this homework 0 will be graded as part of your lab %d work.</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
	<span class="n">write</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"Press Return to continue</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>
	<span class="n">read</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">buffer</span><span class="p">));</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<textarea id="code-copy-1" class="code-copy-textarea" value="int main(int argc, char** argv) {
	puts(&quot;Great! We have plenty of useful resources for you, but it's up to you to&quot;);
	puts(&quot; be an active learner and learn how to solve problems and debug code.&quot;);
	puts(&quot;Bring your near-completed answers the problems below&quot;);
	puts(&quot; to the first lab to show that you've been working on this.&quot;);
	printf(&quot;A few \&quot;don't knows\&quot; or \&quot;unsure\&quot; is fine for lab 1.\n&quot;); 
	puts(&quot;Warning: you and your peers will work hard in this class.&quot;);
	puts(&quot;This is not CS225; you will be pushed much harder to&quot;);
	puts(&quot; work things out on your own.&quot;);
	fprintf(stdout,&quot;This homework is a stepping stone to all future assignments.\n&quot;);
	char p[] = &quot;So, you will want to clear up any confusions or misconceptions.\n&quot;;
	write(1, p, strlen(p) );
	char buffer[1024];
	sprintf(buffer,&quot;For grading purposes, this homework 0 will be graded as part of your lab %d work.\n&quot;, 1);
	write(1, buffer, strlen(buffer));
	printf(&quot;Press Return to continue\n&quot;);
	read(0, buffer, sizeof(buffer));
	return 0;
}
"></textarea></code></pre>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="watch-the-videos-and-write-up-your-answers-to-the-following-questions" class="title-text">Watch the videos and write up your answers to the following questions<a class="anchor title-text" href="#watch-the-videos-and-write-up-your-answers-to-the-following-questions">#</a>
</h2></div>

<p><strong>Important!</strong></p>

<p>The virtual machine-in-your-browser and the videos you need for HW0 are here:</p>

<p>http://cs-education.github.io/sys/</p>

<p>The course wikibook:</p>

<p>https://github.com/angrave/SystemProgramming/wiki</p>

<p>Questions? Comments? Use Piazza:
https://piazza.com/illinois/fall2018/cs241</p>

<p>The in-browser virtual machine runs entirely in Javascript and is fastest in Chrome. Note the VM and any code you write is reset when you reload the page, <em>so copy your code to a separate document.</em> The post-video challenges (e.g. Haiku poem) are not part of homework 0 but you learn the most by doing (rather than just passively watching) - so we suggest you have some fun with each end-of-video challenge.</p>

<p>HW0 questions are below. Copy your answers into a text document sd you’ll need to submit them later in the course.</p>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="chapter-1" class="title-text">Chapter 1<a class="anchor title-text" href="#chapter-1">#</a>
</h2></div>

<p>In which our intrepid hero battles standard out, standard error, file descriptors and writing to files</p>

<h3 id="hello-world-system-call-style" class="title-text">Hello, World! (system call style)</h3>
<ol>
  <li>Write a program that uses <code class="highlighter-rouge">write()</code> to print out “Hi! My name is <code class="highlighter-rouge">&lt;Your Name&gt;</code>”.
    <h3 id="hello-standard-error-stream" class="title-text">Hello, Standard Error Stream!</h3>
  </li>
  <li>Write a function to print out a triangle of height <code class="highlighter-rouge">n</code> to standard error.
    <ul>
      <li>Your function should have the signature <code class="highlighter-rouge">void write_triangle(int n)</code> and should use <code class="highlighter-rouge">write()</code>.</li>
      <li>The triangle should look like this, for n = 3:
        <pre><code class="language-C"><a class="code-copy" rel="code-copy-2" onclick="onCopy(this);">Copy</a><span class="o">*</span>
<span class="o">**</span>
<span class="o">***</span>
<textarea id="code-copy-2" class="code-copy-textarea" value="*
**
***
"></textarea></code></pre>
        <h3 id="writing-to-files" class="title-text">Writing to files</h3>
      </li>
    </ul>
  </li>
  <li>Take your program from “Hello, World!” modify it write to a file called <code class="highlighter-rouge">hello_world.txt</code>.
    <ul>
      <li>Make sure to to use correct flags and a correct mode for <code class="highlighter-rouge">open()</code> (<code class="highlighter-rouge">man 2 open</code> is your friend).
        <h3 id="not-everything-is-a-system-call" class="title-text">Not everything is a system call</h3>
      </li>
    </ul>
  </li>
  <li>Take your program from “Writing to files” and replace <code class="highlighter-rouge">write()</code> with <code class="highlighter-rouge">printf()</code>.
    <ul>
      <li>Make sure to print to the file instead of standard out!</li>
    </ul>
  </li>
  <li>What are some differences between <code class="highlighter-rouge">write()</code> and <code class="highlighter-rouge">printf()</code>?</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="chapter-2" class="title-text">Chapter 2<a class="anchor title-text" href="#chapter-2">#</a>
</h2></div>

<p>Sizing up C types and their limits, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/int" class="fancy-link">int</a></code> and <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/char" class="fancy-link">char</a></code> arrays, and incrementing pointers</p>

<h3 id="not-all-bytes-are-8-bits" class="title-text">Not all bytes are 8 bits?</h3>
<ol>
  <li>How many bits are there in a byte?</li>
  <li>How many bytes are there in a <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/char" class="fancy-link">char</a></code>?</li>
  <li>How many bytes the following are on your machine?
    <ul>
      <li>
<code class="highlighter-rouge"><a href="https://linux.die.net/man/3/int" class="fancy-link">int</a></code>, <code class="highlighter-rouge">double</code>, <code class="highlighter-rouge">float</code>, <code class="highlighter-rouge">long</code>, and <code class="highlighter-rouge">long long</code>
        <h3 id="follow-the-int-pointer" class="title-text">Follow the int pointer</h3>
      </li>
    </ul>
  </li>
  <li>On a machine with 8 byte integers:
    <pre><code class="language-C"><a class="code-copy" rel="code-copy-3" onclick="onCopy(this);">Copy</a><span class="kt">int</span> <span class="n">main</span><span class="p">(){</span>
 <span class="kt">int</span> <span class="n">data</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="p">}</span> 
<textarea id="code-copy-3" class="code-copy-textarea" value="int main(){
 int data[8];
} 
"></textarea></code></pre>
    <p>If the address of data is <code class="highlighter-rouge">0x7fbd9d40</code>, then what is the address of <code class="highlighter-rouge">data+2</code>?</p>
  </li>
  <li>What is <code class="highlighter-rouge">data[3]</code> equivalent to in C?
    <ul>
      <li>Hint: what does C convert <code class="highlighter-rouge">data[3]</code> to before dereferencing the address?</li>
    </ul>
  </li>
</ol>

<h3 id="sizeof-character-arrays-incrementing-pointers" class="title-text">
<code class="highlighter-rouge">sizeof</code> character arrays, incrementing pointers</h3>

<p>Remember, the type of a string constant <code class="highlighter-rouge">"abc"</code> is an array.</p>

<ol>
  <li>Why does this segfault?
    <pre><code class="language-C"><a class="code-copy" rel="code-copy-4" onclick="onCopy(this);">Copy</a><span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="s">"hello"</span><span class="p">;</span>
<span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="sc">'J'</span><span class="p">;</span>
<textarea id="code-copy-4" class="code-copy-textarea" value="char *ptr = &quot;hello&quot;;
*ptr = 'J';
"></textarea></code></pre>
  </li>
  <li>What does <code class="highlighter-rouge">sizeof("Hello\0World")</code> return?</li>
  <li>What does <code class="highlighter-rouge">strlen("Hello\0World")</code> return?</li>
  <li>Give an example of X such that <code class="highlighter-rouge">sizeof(X)</code> is 3.</li>
  <li>Give an example of Y such that <code class="highlighter-rouge">sizeof(Y)</code> might be 4 or 8 depending on the machine.</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="chapter-3" class="title-text">Chapter 3<a class="anchor title-text" href="#chapter-3">#</a>
</h2></div>

<p>Program arguments, environment variables, and working with character arrays (strings)</p>

<h3 id="program-arguments-argc-argv" class="title-text">Program arguments, <code class="highlighter-rouge">argc</code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/argv" class="fancy-link">argv</a></code>
</h3>
<ol>
  <li>What are two ways to find the length of <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/argv" class="fancy-link">argv</a></code>?</li>
  <li>What does <code class="highlighter-rouge">argv[0]</code> represent?
    <h3 id="environment-variables" class="title-text">Environment Variables</h3>
  </li>
  <li>Where are the pointers to environment variables stored (on the stack, the heap, somewhere else)?
    <h3 id="string-searching-strings-are-just-char-arrays" class="title-text">String searching (strings are just char arrays)</h3>
  </li>
  <li>On a machine where pointers are 8 bytes, and with the following code:
    <pre><code class="language-C"><a class="code-copy" rel="code-copy-5" onclick="onCopy(this);">Copy</a><span class="kt">char</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="p">;</span>
<span class="kt">char</span> <span class="n">array</span><span class="p">[]</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="p">;</span>
<textarea id="code-copy-5" class="code-copy-textarea" value='char *ptr = "Hello";
char array[] = "Hello";
'></textarea></code></pre>
    <p>What are the values of <code class="highlighter-rouge">sizeof(ptr)</code> and <code class="highlighter-rouge">sizeof(array)</code>? Why?</p>
  </li>
</ol>

<h3 id="lifetime-of-automatic-variables" class="title-text">Lifetime of automatic variables</h3>

<ol>
  <li>What data structure manages the lifetime of automatic variables?</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="chapter-4" class="title-text">Chapter 4<a class="anchor title-text" href="#chapter-4">#</a>
</h2></div>

<p>Heap and stack memory, and working with structs</p>

<h3 id="memory-allocation-using-malloc-the-heap-and-time" class="title-text">Memory allocation using <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/malloc" class="fancy-link">malloc</a></code>, the heap, and time</h3>
<ol>
  <li>If I want to use data after the lifetime of the function it was created in ends, where should I put it? How do I put it there?</li>
  <li>What are the differences between heap and stack memory?</li>
  <li>Are there other kinds of memory in a process?</li>
  <li>Fill in the blank: “In a good C program, for every malloc, there is a ___”.
    <h3 id="heap-allocation-gotchas" class="title-text">Heap allocation gotchas</h3>
  </li>
  <li>What is one reason <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/malloc" class="fancy-link">malloc</a></code> can fail?</li>
  <li>What are some differences between <code class="highlighter-rouge">time()</code> and <code class="highlighter-rouge">ctime()</code>?</li>
  <li>What is wrong with this code snippet?
    <pre><code class="language-C"><a class="code-copy" rel="code-copy-6" onclick="onCopy(this);">Copy</a><span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<textarea id="code-copy-6" class="code-copy-textarea" value="free(ptr);
free(ptr);
"></textarea></code></pre>
  </li>
  <li>What is wrong with this code snippet?
    <pre><code class="language-C"><a class="code-copy" rel="code-copy-7" onclick="onCopy(this);">Copy</a><span class="n">free</span><span class="p">(</span><span class="n">ptr</span><span class="p">);</span>
<span class="n">printf</span><span class="p">(</span><span class="s">"%s</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">ptr</span><span class="p">);</span>
<textarea id="code-copy-7" class="code-copy-textarea" value='free(ptr);
printf("%s\n", ptr);
'></textarea></code></pre>
  </li>
  <li>How can one avoid the previous two mistakes?
    <h3 id="struct-typedefs-and-a-linked-list" class="title-text">
<code class="highlighter-rouge">struct</code>, <code class="highlighter-rouge">typedef</code>s, and a linked list</h3>
  </li>
  <li>Create a <code class="highlighter-rouge">struct</code> that represents a <code class="highlighter-rouge">Person</code>. Then make a <code class="highlighter-rouge">typedef</code>, so that <code class="highlighter-rouge">struct Person</code> can be replaced with a single word. A person should contain the following information: their name (a string), their age (an integer), and a list of their friends (stored as a pointer to an array of pointers to <code class="highlighter-rouge">Person</code>s).</li>
  <li>Now, make two persons on the heap, “Agent Smith” and “Sonny Moore”, who are 128 and 256 years old respectively and are friends with each other.
    <h3 id="duplicating-strings-memory-allocation-and-deallocation-of-structures" class="title-text">Duplicating strings, memory allocation and deallocation of structures</h3>
    <p>Create functions to create and destroy a Person (Person’s and their names should live on the heap).</p>
  </li>
  <li>
<code class="highlighter-rouge">create()</code> should take a name and age. The name should be copied onto the heap. Use malloc to reserve sufficient memory for everyone having up to ten friends. Be sure initialize all fields (why?).</li>
  <li>
<code class="highlighter-rouge">destroy()</code> should free up not only the memory of the person struct, but also free all of its attributes that are stored on the heap. Destroying one person should not destroy any others.</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="chapter-5" class="title-text">Chapter 5<a class="anchor title-text" href="#chapter-5">#</a>
</h2></div>

<p>Text input and output and parsing using <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/getchar" class="fancy-link">getchar</a></code>, <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/gets" class="fancy-link">gets</a></code>, and <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/getline" class="fancy-link">getline</a></code>.</p>

<h3 id="reading-characters-trouble-with-gets" class="title-text">Reading characters, trouble with gets</h3>
<ol>
  <li>What functions can be used for getting characters from <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/stdin" class="fancy-link">stdin</a></code> and writing them to <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/stdout" class="fancy-link">stdout</a></code>?</li>
  <li>Name one issue with <code class="highlighter-rouge">gets()</code>.
    <h3 id="introducing-sscanf-and-friends" class="title-text">Introducing <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/sscanf" class="fancy-link">sscanf</a></code> and friends</h3>
  </li>
  <li>Write code that parses the string “Hello 5 World” and initializes 3 variables to “Hello”, 5, and “World”.
    <h3 id="getline-is-useful" class="title-text">
<code class="highlighter-rouge"><a href="https://linux.die.net/man/3/getline" class="fancy-link">getline</a></code> is useful</h3>
  </li>
  <li>What does one need to define before including <code class="highlighter-rouge">getline()</code>?</li>
  <li>Write a C program to print out the content of a file line-by-line using <code class="highlighter-rouge">getline()</code>.</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="c-development" class="title-text">C Development<a class="anchor title-text" href="#c-development">#</a>
</h2></div>

<p>These are general tips for compiling and developing using a compiler and git. Some web searches will be useful here</p>

<ol>
  <li>What compiler flag is used to generate a debug build?</li>
  <li>You modify the Makefile to generate debug builds and type <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/make" class="fancy-link">make</a></code> again. Explain why this is insufficient to generate a new build.</li>
  <li>Are tabs or spaces used to indent the commands after the rule in a Makefile?</li>
  <li>What does <code class="highlighter-rouge">git commit</code> do? What’s a <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/sha" class="fancy-link">sha</a></code> in the context of git?</li>
  <li>What does <code class="highlighter-rouge">git log</code> show you?</li>
  <li>What does <code class="highlighter-rouge">git status</code> tell you and how would the contents of <code class="highlighter-rouge">.gitignore</code> change its output?</li>
  <li>What does <code class="highlighter-rouge">git push</code> do? Why is it not just sufficient to commit with <code class="highlighter-rouge">git commit -m 'fixed all bugs' </code>?</li>
  <li>What does a non-fast-forward error <code class="highlighter-rouge">git push</code> reject mean? What is the most common way of dealing with this?</li>
</ol>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="optional-just-for-fun" class="title-text">Optional (Just for fun)<a class="anchor title-text" href="#optional-just-for-fun">#</a>
</h2></div>
<ul>
  <li>Convert your a song lyrics into System Programming and C code covered in this wiki book and share on Piazza.</li>
  <li>Find, in your opinion, the best and worst C code on the web and post the link to Piazza.</li>
  <li>Write a short C program with a deliberate subtle C bug and post it on Piazza to see if others can spot your bug.</li>
  <li>Do you have any cool/disastrous system programming bugs you’ve heard about? Feel free to share with your peers and the course staff on piazza.</li>
</ul>
</div></div>
</div></div></div>
</div></div></div>
        
        <div class="wrapper">
</div>
      </div>
      <div class="col-md-2 col-sm-1 col-xs-0"></div>
    </div>
  </div>
  <script>
    var github_repo = "illinois-cs241/illinois-cs241.github.io";
    var github_path = "_wikibook/hw0.md";
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" crossorigin="anonymous"></script>
<script src="/js/main.js?v=2018-09-08 16:51:38 +0000"></script>

<script>
$(document).ready(function() { 
    $("#tuxlink").prop("href", "javascript:;").click(function() { 
        if ("WebkitAppearance" in document.documentElement.style) { 
            var style = document.createElement("style"); 
            style.setAttribute("id", "tuxstyle"); 
            style.appendChild(document.createTextNode("")); 
            document.head.appendChild(style); 
            var sheet = style.sheet;
            sheet.insertRule("::-webkit-scrollbar-thumb {border-radius: 0; background-color: white; -webkit-box-shadow: none;}", 0); 
        } 

        const hackerKey = 'hackerLocalKey';
        const hackerOff = "off";
        const hackerOn = "on";

        if (window.localStorage.getItem(hackerKey) === null) {
            window.localStorage.setItem(hackerKey, hackerOff);
        }

        $("#tuxlink").unbind('click').click(function() { 
            const hackerClass = 'hacker';
            $('html, body, header, nav, table, pre, span, :not(.card-staff) > a, p, h1, h2, h3, h4, h5, h6').toggleClass(hackerClass);
            $('ul, img, pre').toggleClass(hackerClass);
            $('.toc').toggleClass(hackerClass);
            $('.content .highlighter-rouge').toggleClass(hackerClass);
            $('.large-centered.columns').toggleClass(hackerClass);
            $('.pad').toggleClass(hackerClass);
            $('a').toggleClass(hackerClass);
            $('tbody tr:nth-child(2n+1)').toggleClass(hackerClass);
            $("#tuxlink img").toggleClass(hackerClass);

            const val = window.localStorage.getItem(hackerKey);
            if (val === hackerOff) {
                window.localStorage.setItem(hackerKey, hackerOn);
            } else {
                window.localStorage.setItem(hackerKey, hackerOff);
            }
            return false; 
        }); 
        $("#tuxlink").click();
        const stored = window.localStorage.getItem(hackerKey);
        if (stored === hackerOn) {
            console.log("Hello!")
            $("#tuxlink").click();
        } else {
            console.log("Noo");
        }

        return false; 
    }); 
    } 
    ); 
    </script>

<script src="/js/analytics.js"></script>

<footer class="">

<div class="container-fluid">
<div class="shadow"></div>

</div>

</footer>

</body>
</html>
