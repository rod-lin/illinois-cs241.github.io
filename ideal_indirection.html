<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="images/favicons/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="images/favicons/favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="images/favicons/favicon-16x16.png" sizes="16x16">
  <link rel="manifest" href="images/favicons/manifest.json">
  <link rel="mask-icon" href="images/favicons/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <title>Ideal Indirection</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link async rel="stylesheet" href="/css/code-style.css?v=2018-03-15 14:21:15 +0000">
  <link rel="stylesheet" href="/css/main.css?v=2018-03-15 14:21:15 +0000">

</head>

<body>
<!-- Always shows a header, even in smaller screens. -->
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">

            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>

            <a class="navbar-brand navbar-link normal" href="/">CS 241: System Programming</a>
            <a class="navbar-brand navbar-link small" href="/">CS 241</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li>
            <a class="navbar-link" href="/mps.html">MPs</a>
            </li>
            <li>
            <a class="navbar-link" href="/labs.html">Labs</a>
            </li>
            <li>
            <a class="navbar-link" href="/help.html">Help!</a>
            </li>
            <li>
            <a class="navbar-link" href="/schedule.html">Schedule</a>
            </li>
            <li>
            <a class="navbar-link" href="/honors.html">Honors</a>
            </li>
            <li>
            <a class="navbar-link" href="/staff.html">The Crew</a>
            </li>
            <li>
            <a class="navbar-link" href="/search.html">Search</a>
            </li>
            <li>
            <a class="navbar-link" href="/wikibook/home.html">Wikibook</a>
            </li>
          </ul>
        </div>
        </div>
</nav>

<div class="container-fluid">
  <div class="row">
    <div class="col-md-2 col-sm-1 col-xs-0"></div>
    <div class="col-md-8 col-sm-10 col-xs-12">
      <div class="wrapper">
        <div class="pad"><div class="card">
          <div class="title">
            <div class="speaker-wrapper">
              <button onclick="speak()" class="speaker" alt="Read Page"></button>
            </div>
            <h1>
              Ideal Indirection
              
                <a class="github-link hidden-xs" href="https://github.com/illinois-cs241/illinois-cs241.github.io/blob/develop/_docs/ideal_indirection.md">Edit on Github</a>
              
            </h1>
          </div>
          <div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
            
              <div class="submission-wrapper">
                
                  <b>Entire Assignment</b> due <b>3/14 11:59pm</b><br/>
                  
                    <b>Graded files:</b>
                    <ul>
                      
                        <li>mmu.c</li>
                      
                    </ul>
                  
                
              </div>
            
          </div></div></div>
        </div></div>
      </div>
      <div class="toc-wrapper">
<h4>Content</h4>
<ul class="toc">
<li><a id="toc_quizzizattendance" href="#quizzizattendance" class="fancy-link">Quizziz/Attendance</a></li>
<li><a id="toc_overview" href="#overview" class="fancy-link">Overview</a></li>
<li><a id="toc_translation-lookaside-buffer-tlbc-and-tlbh" href="#translation-lookaside-buffer-tlbc-and-tlbh" class="fancy-link">Translation Lookaside Buffer (<code class="highlighter-rouge">tlb.c</code> and <code class="highlighter-rouge">tlb.h</code>)</a></li>
<li><a id="toc_kernel-kernelc-and-kernelh" href="#kernel-kernelc-and-kernelh" class="fancy-link">Kernel (<code class="highlighter-rouge">kernel.c</code> and <code class="highlighter-rouge">kernel.h</code>)</a></li>
<li><a id="toc_memory-management-unit-mmuc" href="#memory-management-unit-mmuc" class="fancy-link">Memory Management Unit (<code class="highlighter-rouge">mmu.c</code>)</a></li>
<li><a id="toc_testing" href="#testing" class="fancy-link">Testing</a></li>
</ul>
</div>
      <div id="content">
        
        <div class="wrapper">
  <div class="pad"><div class="card">
<div class="title"><h2 id="learning-objectives" class="title-text">Learning Objectives<a class="anchor title-text" href="#learning-objectives">#</a>
</h2></div>
  
  


  <div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>
    The learning objectives for Ideal Indirection are: <br>
    </p>
<ul class="mdl-list">
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Virtual Memory</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">The virtual address translation process</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Memory Management Unit (MMU)</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Page Tables</span>
        </li>
      
        <li class="mdl-list__item">
          <span class="mdl-list__item-primary-content">Translation Lookaside Buffer (TLB)</span>
        </li>
      
    </ul>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="suggested-readings" class="title-text">Suggested Readings<a class="anchor title-text" href="#suggested-readings">#</a>
</h2></div>
  
  

<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>
    We suggest you read the following from the
    <a href="https://github.com/angrave/SystemProgramming/wiki" class="fancy-link wiki-link">wikibook</a>
    before starting Ideal Indirection: <br>
    </p>
<ul>
      
        <li>
          <a href="/wikibook/virtual-memory-part-1-introduction-to-virtual-memory.html#" target="_blank" class="fancy-link wiki-link">Virtual Memory, Part 1: Introduction to Virtual Memory
          </a>
        </li>
      
    </ul>
</div></div></div>
</div></div>
</div>
        <div class="wrapper">
<div class="pad"><div class="card">
<div class="title"><h2 id="quizzizattendance" class="title-text">Quizziz/Attendance<a class="anchor title-text" href="#quizzizattendance">#</a>
</h2></div>



<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1"><p>For this week’s quizziz username mapping/feedback form see this link <a href="https://docs.google.com/forms/d/e/1FAIpQLSdmmKmx6XHaUtXgLVGtQzOFdIS1zuuInFjbOWqOwkk_Xcy_HA/viewform" class="fancy-link wiki-link">https://docs.google.com/forms/d/e/1FAIpQLSdmmKmx6XHaUtXgLVGtQzOFdIS1zuuInFjbOWqOwkk_Xcy_HA/viewform</a>.</p></div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="overview" class="title-text">Overview<a class="anchor title-text" href="#overview">#</a>
</h2></div>





<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>In this assignment, you will be working on managing a mapping of 32-bit virtual address space  to a 32-bit physical address space with 4 KB (kilobyte) pages.
Each component of virtual memory has been split up into several files to help you build a mental model of virtual memory.
Reading through these files can start to help you understand the roles of the different hardware and software involved in managing virtual memory.
You will only have to write two functions in <code class="highlighter-rouge">mmu.c</code>, but it requires a good understanding of the wikibook and decent knowledge of the rest of the provided code.</p>
<p>The rest of this documentation will serve to help you understand the purpose of each file and give you a high level understanding of virtual memory.
The implementation details of each function are documented in the header and source files.
It is your responsibility to read every line of code before starting this assignment, since you will not be able to do anything meaningful otherwise.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">

















<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<h1 id="page-tables-page_tablec-and-page_tableh">Page Tables (<code class="highlighter-rouge">page_table.c</code> and <code class="highlighter-rouge">page_table.h</code>)</h1>
<p>Each process has two levels of paging:</p>
<p>The top level page table is known as a “page directory” and has entries (page directory entries) that hold the base address of page tables (beginning of a page table).
Each of these page tables hold entries (page table entries) that hold the base address of an actual frame in physical memory, which you will be reading from and writing to.
There are other metadata bits in both the page directory and page table entries that is explained in detail in <code class="highlighter-rouge">page_table.h</code>.
The actual layout is taken directly from a real 32 bit processor and operating system, which you can read more about in the <a href="http://flint.cs.yale.edu/cs422/doc/24547212.pdf#page=88" class="fancy-link wiki-link">“IA-32 Intel® Architecture Software Developer’s Manual”</a>.</p>
<p>For illustrative purposes a Page Table Entry looks like the following:</p>
<p><img src="images/page_table_entry.png" alt="Page Table Entry"></p>
<p>Each entry is represented as a struct with bit fields whose syntax you can learn about in a <a href="http://www.tutorialspoint.com/cprogramming/c_bit_fields.htm" class="fancy-link wiki-link">tutorial</a>.
The bit fields basically allows us to squeeze multiple flags into a single 32 bit integer.
This means that each entry has not only the physical address to the lower level paging structure, but also metadata bits/flags which are documented in the header file.
However for the purpose of this lab you are only responsible for knowing how the following fields works:</p>
<ul>
  <li>Page base address, bits 12 through 32</li>
  <li>Present (P) flag, bit 0</li>
  <li>Read/write (R/W) flag, bit 1</li>
  <li>User/supervisor (U/S) flag, bit 2</li>
  <li>Accessed (A) flag, bit 5</li>
  <li>Dirty (D) flag, bit 6</li>
</ul>
<p>More detailed information about the function of each permission bit is described <code class="highlighter-rouge">page_table.h</code>. Here are some helpful
guidelines for correctly setting the bits:</p>
<ul>
  <li>Once a <code class="highlighter-rouge">page_directory_entry</code> is created, it will remain in physical memory and will not be swapped to disk.</li>
  <li>Each segmentation has a <code class="highlighter-rouge">permissions</code> field, and there is a permissions struct in <code class="highlighter-rouge">segments.h</code>. 
If <code class="highlighter-rouge">permissions &amp; WRITE</code> is not <code class="highlighter-rouge">0</code>, then it has write permission. Same is true for <code class="highlighter-rouge">READ</code> and <code class="highlighter-rouge">EXEC</code>.</li>
  <li>
<code class="highlighter-rouge">page_directory_entry</code>’s should always have read and write permission</li>
  <li>For the purposes of this lab, all <code class="highlighter-rouge">page_table_entry</code>s and <code class="highlighter-rouge">page_directory_entry</code>s will have the <code class="highlighter-rouge">user_supervisor</code> flag
set to <code class="highlighter-rouge">1</code>
</li>
  <li>You only need to keep track of Accessed and Dirty flags for each <code class="highlighter-rouge">page_table_entry</code>, based on any reading or writing that
has occurred to the <code class="highlighter-rouge">base_addr</code> stored by the <code class="highlighter-rouge">page_table_entry</code>.</li>
</ul>
<div class="pad"><div class="card">
<div class="title"><h2 id="translation-lookaside-buffer-tlbc-and-tlbh" class="title-text">Translation Lookaside Buffer (<code class="highlighter-rouge">tlb.c</code> and <code class="highlighter-rouge">tlb.h</code>)<a class="anchor title-text" href="#translation-lookaside-buffer-tlbc-and-tlbh">#</a>
</h2></div>

<p>The Translation Lookaside Buffer will cache the base virtual address to the corresponding page table entry pointer.
The implementation and header is provided to you.
Make note of the use of double pointers.</p>

<p>The reason why our TLB caches page table entry pointers instead of physical addresses of frames is because you will need to set metadata bits when translating addresses.</p>

</div></div>
</div></div></div>
</div></div>
<div class="pad"><div class="card">















<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<h1 id="segments-segmentsc-and-segmentsh">Segments (<code class="highlighter-rouge">segments.c</code> and <code class="highlighter-rouge">segments.h</code>)</h1>
<p>A process’s virtual address space is divided into several segments. You are familiar with many of these:</p>
<ul>
  <li>Stack</li>
  <li>Heap</li>
  <li>BSS</li>
  <li>Data</li>
  <li>Code</li>
</ul>
<p>For this lab, a processes’ address space is split into memory segments like so:</p>
<p><img src="http://static.duartes.org/img/blogPosts/linuxFlexibleAddressSpaceLayout.png" alt="Virtual Address Space Layout"></p>
<p>Photo Cred: http://duartes.org/gustavo/blog/post/anatomy-of-a-program-in-memory/</p>
<p>Notice how some of the memory segments like the stack and mmap have an arrow pointing down.
This indicates that these regions “grow down” by decreasing their end boundry’s virtual address as you add elements to them.
This is so that the stack and heap can share the same address space, but grow in different directions.
It is now easy to see that if you put too many elements onto the stack it will eventually run into heap memory leading to the classic Stack Overflow.</p>
<p>The reasons why this external structure is needed for this lab is to answer the question: “How do you know when an address is invalid?”.
You can not rely on the present bit of a page table entry, since that page may be valid, but just happens to be paged to disk.
The solution is to check to see if an address is in any memory segment with <code class="highlighter-rouge">bool address_in_segmentations(vm_segmentations *segmentations, uint32_t address);</code>.
If the address is not in any of the process’s segments, then you get the dreaded segmentation fault (segfault).</p>
<div class="pad"><div class="card">
<div class="title"><h2 id="kernel-kernelc-and-kernelh" class="title-text">Kernel (<code class="highlighter-rouge">kernel.c</code> and <code class="highlighter-rouge">kernel.h</code>)<a class="anchor title-text" href="#kernel-kernelc-and-kernelh">#</a>
</h2></div>

<p>For this assignment all the memory allocations will be abstracted by <code class="highlighter-rouge">kernel.c</code>.</p>

<p>This file will maintain a global array of pages that you will use to model all of physical memory.
That is to say that all virtual addresses get translated to an address in:</p>

<p><code class="highlighter-rouge">char physical_memory[PHYSICAL_MEMORY_SIZE] __attribute__((aligned(PAGE_SIZE)));</code></p>

<p>The caveat to this lab is that it is all done in user space.
That means you are technically mapping one virtual address to another virtual address that represents a physical address.
However, all the concepts involved remain the same in a real operating system’s memory management software.</p>

<p>We use a global <code class="highlighter-rouge"><a href="https://linux.die.net/man/3/char" class="fancy-link">char</a></code> array for our physical memory as it so happens that global variables such as these are stored
in some of the lowest addresses in memory. Because of this, the array, despite existing in a 64 bit environment, only
needs the 32 lower bits of a 64 bit address to address it. This is great because it allows us to use 32 addresses to
refer to a physical memory location, despite being on a 64 bit system. The downside is that we will need to convert
any 32 bit references to the data into a 64 bit pointer before we actually try to access the physical memory at that
address.</p>

<p>In this lab, we will be dealing with <code class="highlighter-rouge">addr32</code> type variables to keep track of both virtual and “physical” addresses.
The type <code class="highlighter-rouge">addr32</code> is just an alias for <code class="highlighter-rouge">uint32_t</code>, which is just a type that can store a 32 bit value. However,
since our actual VMs are 64 bit, we will need to convert this <code class="highlighter-rouge">addr32</code> into a system pointer if we ever want to interact
with real physical memory directly (ie, by dereferencing a pointer). We have provided a few helper functions to 
help with this translation:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void *get_system_pointer_from_pte(page_table_entry *entry);
void *get_system_pointer_from_pde(page_directory_entry *entry);
void *get_system_pointer_from_address(addr32 address);
</code></pre></div></div>

<p>The function <code class="highlighter-rouge">get_system_pointer_from_address</code> will take an <code class="highlighter-rouge">addr32</code> address and return a system pointer that you can
use to interact with the data at that address. Similarly, the functions <code class="highlighter-rouge">get_system_pointer_from_pte</code> and
<code class="highlighter-rouge">get_system_pointer_from_pde</code> can be used to get a pointer for accessing the memory at the <code class="highlighter-rouge">base_addr</code> of the
<code class="highlighter-rouge">page_table_entry</code> or <code class="highlighter-rouge">page_directory_entry</code> (respectively). A good example of using these functions can be found in 
<code class="highlighter-rouge">mmu.c</code>’s <code class="highlighter-rouge">mmu_add_process</code> function.</p>

<p>A word of caution: shifting signed numbers can produce unexpected behavior, as it will always extend the
sign, meaning if the most significant bit is <code class="highlighter-rouge">1</code>, the “leftmost” bits after shifting right will all be <code class="highlighter-rouge">1</code>s instead of <code class="highlighter-rouge">0</code>s. 
Do yourself a favor, work with unsigned values.</p>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="memory-management-unit-mmuc" class="title-text">Memory Management Unit (<code class="highlighter-rouge">mmu.c</code>)<a class="anchor title-text" href="#memory-management-unit-mmuc">#</a>
</h2></div>

<p>For this assignment you are mainly responsible for handling reads to and writes from virtual addresses.</p>

<p>The functions you are to complete are:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>void mmu_read_from_virtual_address(mmu *this, uintptr_t virtual_address, size_t pid, void *buffer, size_t num_bytes);
void mmu_write_to_virtual_address(mmu *this, uintptr_t virtual_address, size_t pid, const void *buffer, size_t num_bytes);
</code></pre></div></div>
<p>This means you have to translate from a virtual to a physical address:</p>

<p>From the wikibook: “For most memory accesses of most programs, there is a significant chance that the TLB has cached the results… the TLB [may] not have the result cached and the MMU must use the much slower page table to determine the physical frame.”</p>

<p>Thus for any virtual address, you should check whether the result has been already cached in the TLB (see <code class="highlighter-rouge">tlb.h</code>). Otherwise you must search the page tables.</p>

<p>For this lab we have 2 levels of indirection (see <code class="highlighter-rouge">page_table.h</code>).</p>

<p>The following illustration demonstrates how to translate from a virtual address to a physical address:</p>

<p><img src="images/virtual_address_translation.png" alt="Virtual Address Translation"></p>

<p>That this image is saying is that you are to take the top 10 bits of the provided virtual address to index an entry in the page directory of the process.
That entry should contain the base address of a page table.
You are to then take the next 10 bits to index an entry the page table you got in the previous step, which should point to a frame in physical memory.
Finally you are to use the last 12 bits to offset to a particular byte in the 4kb frame.</p>

</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="testing" class="title-text">Testing<a class="anchor title-text" href="#testing">#</a>
</h2></div>

<p>Make sure you throughly test your code as usual. We have provided some tests cases, but we encourage you to write your own as well. Use the provided test cases as a reference to learn to create tests with good coverage.</p>
</div></div>
</div></div></div>
</div></div>
</div>
        
        <div class="wrapper">
<div class="pad"><div class="card">
<div class="title"><h2 id="submission-instructions" class="title-text">Submission Instructions<a class="anchor title-text" href="#submission-instructions">#</a>
</h2></div>















<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>Please read details on <a href="http://illinois-cs241.github.io/#academic-integrity" class="fancy-link wiki-link">Academic Integrity</a> fully. These are shared by all assignments in CS 241.</p>
<p>We will be using Subversion as our hand-in system this semester. Our grading system will checkout your most recent (pre-deadline) commit for grading. Therefore, to hand in your code, all you have to do is commit it to your Subversion repository.</p>
<p>To check out the provided code for <code class="highlighter-rouge">ideal_indirection</code> from the class repository, go to your cs241 directory (the one you checked out for “know your tools”) and run:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn up
</code></pre></div></div>
<p>If you run <code class="highlighter-rouge"><a href="https://linux.die.net/man/1/ls" class="fancy-link">ls</a></code> you will now see a <code class="highlighter-rouge">ideal_indirection</code> folder, where you can find this assignment! To commit your changes (send them to us), type:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>svn ci -m "ideal_indirection submission"
</code></pre></div></div>
<p>Your repository directory can be viewed from a web browser from the following URL: <a href="https://subversion.ews.illinois.edu/svn/sp18-cs241/NETID/ideal_indirection" class="fancy-link wiki-link">https://subversion.ews.illinois.edu/svn/sp18-cs241/NETID/ideal_indirection</a>, where NETID is your University NetID. It is important to check that the files you expect to be graded are present and up to date in your SVN copy.</p>
</div></div></div>
</div></div>
<div class="pad"><div class="card">
<div class="title"><h2 id="assignment-feedback" class="title-text">Assignment Feedback<a class="anchor title-text" href="#assignment-feedback">#</a>
</h2></div>







<div class="container-fluid"><div class="row"><div class="content col-sm-11 .col-sm-offset-1">
<p>We strive to provide the best assignments that we can for this course, and we would like your feedback on them!</p>
<p>This is the form we will use to evaluate our assignments. We appreciate the time you take to give us your honest feedback and we promise to keep improving the course to make your experience in CS 241 the best it can be.</p>
<p><a href="https://goo.gl/forms/hREf0ojFWumYfQF12" class="fancy-link wiki-link">https://goo.gl/forms/hREf0ojFWumYfQF12</a></p>
</div></div></div>
</div></div>
</div>
      </div>
      <div class="col-md-2 col-sm-1 col-xs-0"></div>
    </div>
  </div>
  <script>
    var github_repo = "illinois-cs241/illinois-cs241.github.io";
    var github_path = "_docs/ideal_indirection.md";
  </script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha384-xBuQ/xzmlsLoJpyjoggmTEz8OWUFM0/RC5BsqQBDX2v5cMvDHcMakNTNrHIW2I5f" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-Ra6zh6uYMmH5ydwCqqMoykyf1T/+ZcnOQfFPhDrp2kI4OIxadnhsvvA2vv9A7xYv" crossorigin="anonymous"></script>
<script src="/js/main.js?v=2018-03-15 14:21:15 +0000"></script>

<script>
$(document).ready(function(){
    $('[data-toggle="popover"]').popover({
      trigger: 'manual',
        container: $(this).attr('id'),
        placement: 'top',
        content: function () {
            return '<div class="hover-hovercard"></div>';
        }
    }).on("mouseenter", function () {
        var _this = this;
        $(this).popover("show");
        $(this).siblings(".popover").on("mouseleave", function () {
            $(_this).popover('hide');
        });
    }).on("mouseleave", function () {
        var _this = this;
        setTimeout(function () {
            if (!$(".popover:hover").length) {
               $(_this).popover("hide")
            }
        }, 100);
    });

    $('[data-toggle="tooltip"]').tooltip();
});

</script>
<script src="/js/analytics.js"></script>
<footer class="">

<div class="container-fluid">
<div class="shadow"></div>

</div>

</footer>

</body>
</html>
